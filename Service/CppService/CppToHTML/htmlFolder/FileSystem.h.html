<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>FileSystem.h</title>
</head>
<body>
    <div>#ifndef&nbspFILESYSTEM_H<br>#define&nbspFILESYSTEM_H<br>/////////////////////////////////////////////////////////////////////////////<br>//&nbspFileSystem.h&nbsp-&nbspSupport&nbspfile&nbspand&nbspdirectory&nbspoperations&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp//<br>//&nbspLinux&nbspver&nbsp1.1&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp//<br>//&nbspLanguage:&nbsp&nbsp&nbsp&nbspgcc/g++&nbspv4.6.1&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp//<br>//&nbspPlatform:&nbsp&nbsp&nbsp&nbspDell&nbspXPS&nbsp8300,&nbspCore&nbspi7,&nbspkubuntu&nbspv11.10&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp//<br>//&nbspApplication:&nbspSummer&nbspProjects,&nbsp2012&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp//<br>//&nbspAuthor:&nbsp&nbsp&nbsp&nbsp&nbsp&nbspJim&nbspFawcett,&nbspCST&nbsp4-187,&nbspSyracuse&nbspUniversity&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp//<br>//&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(315)&nbsp443-3948,&nbspjfawcett@twcny.rr.com&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp//<br>/////////////////////////////////////////////////////////////////////////////<br>/*<br>&nbsp*&nbspModule&nbspOperations:<br>&nbsp*&nbsp==================<br>&nbsp*&nbspThis&nbsppackage&nbspprovides&nbspthe&nbspnamespace&nbspFileSystem&nbspcontaining:<br>&nbsp*&nbspclasses:&nbspFile,&nbspFileInfo,&nbspPath,&nbspand&nbspDirectory.<br>&nbsp*<br>&nbsp*&nbspThe&nbspFile&nbspclass&nbspsupports&nbspopening&nbsptext&nbspand&nbspbinary&nbspfiles&nbspfor&nbspeither&nbspinput&nbsp<br>&nbsp*&nbspor&nbspoutput.&nbsp&nbspFile&nbspobjects&nbsphave&nbspnames,&nbspget&nbspand&nbspput&nbsplines&nbspof&nbsptext,&nbspget&nbspand<br>&nbsp*&nbspput&nbspblocks&nbspof&nbspbytes&nbspif&nbspbinary,&nbspcan&nbspbe&nbsptested&nbspfor&nbspoperational&nbspstate,<br>&nbsp*&nbspcleared&nbspof&nbsperrors,&nbspand&nbspoutput&nbspFile&nbspobjects&nbspcan&nbspbe&nbspflushed&nbspto&nbsptheir&nbspstreams.<br>&nbsp*<br>&nbsp*&nbspFileInfo&nbspclass&nbspaccepts&nbspa&nbspfully&nbspqualified&nbspfilespec&nbspand&nbspsupports&nbspqueries<br>&nbsp*&nbspconcerning&nbspname,&nbsptime&nbspand&nbspdate,&nbspsize,&nbspand&nbspattributes.&nbsp&nbspYou&nbspcan&nbspcompare<br>&nbsp*&nbspFileInfo&nbspobjects&nbspby&nbspname,&nbspdate,&nbspand&nbspsize.<br>&nbsp*<br>&nbsp*&nbspPath&nbspclass&nbspprovides&nbspstatic&nbspmethods&nbspto&nbspturn&nbspa&nbsprelative&nbspfilespec&nbspinto&nbspan<br>&nbsp*&nbspabsolute&nbspfilespec,&nbspreturn&nbspthe&nbsppath,&nbspname,&nbspor&nbspextension&nbspof&nbspthe&nbspfilespec,<br>&nbsp*&nbspand&nbspbuild&nbspfilespecs&nbspfrom&nbsppath&nbspand&nbspname.&nbsp&nbspPath&nbspalso&nbspprovides&nbspmethods&nbspto<br>&nbsp*&nbspconvert&nbspfilespecs&nbspto&nbspuppercase&nbspand&nbspto&nbsplowercase.<br>&nbsp*<br>&nbsp*&nbspThe&nbspDirectory&nbspclass&nbspsupports&nbspgetting&nbspfilenames&nbspor&nbspdirectories&nbspfrom&nbspa&nbsp<br>&nbsp*&nbspfully&nbspqualified&nbspfilespec,&nbspe.g.,&nbsppath&nbsp+&nbspfilename&nbsppattern&nbspusing&nbspstatic<br>&nbsp*&nbspmethods.&nbsp&nbspIt&nbspalso&nbspprovides&nbspnon-static&nbspmethods&nbspto&nbspget&nbspand&nbspset&nbspthe&nbspcurrent<br>&nbsp*&nbspdirectory.<br>&nbsp*<br>&nbsp*&nbspPublic&nbspInterface:<br>&nbsp*&nbsp=================<br>&nbsp*&nbspFile&nbspf(filespec,File::in,File::binary);<br>&nbsp*&nbspFile&nbspg(filespec,File::out,File::binary);<br>&nbsp*&nbspwhile(f.isGood())&nbsp{<br>&nbsp*&nbsp&nbsp&nbspblock&nbspb&nbsp=&nbspf.getBlock();<br>&nbsp*&nbsp&nbsp&nbspg.putBlock(b);<br>&nbsp*&nbsp}<br>&nbsp*&nbspFileInfo&nbspfi(&quot..\foobar.txt&quot);<br>&nbsp*&nbspif(fi.good())<br>&nbsp*&nbsp&nbsp&nbsp...<br>&nbsp*&nbspstd::string&nbspfilespec&nbsp=&nbsp&quot..\temp.txt&quot;<br>&nbsp*&nbspstd::string&nbspfullyqualified&nbsp=&nbspPath::getFullFileSpec(filespec);<br>&nbsp*&nbspstd::string&nbsppath&nbsp=&nbspPath::getPath(fullyqualified);<br>&nbsp*&nbspstd::string&nbspname&nbsp=&nbspPath::getName(fullyqualified);<br>&nbsp*&nbspstd::string&nbspextn&nbsp=&nbspPath::getExt(fullyqualified);<br>&nbsp*<br>&nbsp*&nbspDirectory&nbspd;<br>&nbsp*&nbspstd::string&nbspdir&nbsp=&nbspDirectory::getCurrentDirectory();<br>&nbsp*&nbspDirectory::setCurrentDirectory(dir);<br>&nbsp*&nbspstd::vector&ltstd::string&gt&nbspfiles&nbsp=&nbspDirectory::getFiles(path,&nbsppattern);<br>&nbsp*&nbspstd::vector&ltstd::string&gt&nbspdirs&nbsp=&nbspDirectory::getDirectories(path);<br>&nbsp*&nbsp<br>&nbsp*&nbspRequired&nbspFiles:<br>&nbsp*&nbsp===============<br>&nbsp*&nbspFileSystem.h,&nbspFileSystem.cpp<br>&nbsp*<br>&nbsp*&nbspBuild&nbspCommand:<br>&nbsp*&nbsp==============<br>&nbsp*&nbspg++&nbspFileSystem.cpp<br>&nbsp*<br>&nbsp*&nbspMaintenance&nbspHistory:<br>&nbsp*&nbsp====================<br>&nbsp*&nbspver&nbsp1.2&nbsp:&nbsp21&nbspJan&nbsp2015<br>&nbsp*&nbsp-&nbspchanged&nbspteststub&nbspcontents&nbspto&nbspmatch&nbspnew&nbspdirectory&nbspstructure<br>&nbsp*&nbsp-&nbspminor&nbspcleanup&nbspof&nbspcode<br>&nbsp*&nbspver&nbsp1.1&nbsp:&nbsp23&nbspFeb&nbsp2013<br>&nbsp*&nbsp-&nbspfixed&nbspbug&nbspin&nbspPath::getExt&nbspfound&nbspby&nbspYang&nbspZhou&nbspand&nbspKevin&nbspKong<br>&nbsp*&nbspver&nbsp1.0&nbsp:&nbsp06&nbspJun&nbsp2012<br>&nbsp*&nbsp-&nbspfirst&nbsprelease<br>&nbsp*/<br>#include&nbsp&ltfstream&gt<br>#include&nbsp&ltstring&gt<br>#include&nbsp&ltvector&gt<br>#include&nbsp&ltiostream&gt<br>#include&nbsp&ltsstream&gt<br>#include&nbsp&ltiomanip&gt<br>#include&nbsp&ltvector&gt<br>#include&nbsp&ltstdexcept&gt<br>#include&nbsp&ltcstdio&gt<br>//#include&nbsp&ltregex&gt&nbsp&nbsp//&nbspnot&nbspcomplete&nbspfor&nbspg++<br>#include&nbsp&ltstdlib.h&gt<br>#include&nbsp&lttime.h&gt<br>#include&nbsp&ltdirent.h&gt<br>#include&nbsp&ltsys/types.h&gt<br>#include&nbsp&ltsys/syscall.h&gt<br>#include&nbsp&ltsys/stat.h&gt<br>#include&nbsp&ltsys/sendfile.h&gt<br>#include&nbsp&ltunistd.h&gt<br>#include&nbsp&ltfcntl.h&gt<br>#include&nbsp&lterrno.h&gt<br>#include&nbsp&ltstring.h&gt<br><br>namespace&nbspFileSystem<br>{<br>&nbsp&nbsp/////////////////////////////////////////////////////////<br>&nbsp&nbsp//&nbspBlock<br>&nbsp&nbsp<br>&nbsp&nbsptypedef&nbspchar&nbspByte;<br><br>&nbsp&nbspclass&nbspBlock<br>&nbsp&nbsp{<br>&nbsp&nbsppublic:<br>&nbsp&nbsp&nbsp&nbspBlock(size_t&nbspsize=0)&nbsp:&nbspbytes_(size)&nbsp{}<br>&nbsp&nbsp&nbsp&nbspBlock(Byte*&nbspbeg,&nbspByte*&nbspend);<br>&nbsp&nbsp&nbsp&nbspvoid&nbsppush_back(Byte&nbspb);<br>&nbsp&nbsp&nbsp&nbspByte&amp&nbspoperator[](size_t&nbspi);<br>&nbsp&nbsp&nbsp&nbspByte&nbspoperator[](size_t&nbspi)&nbspconst;<br>&nbsp&nbsp&nbsp&nbspbool&nbspoperator==(const&nbspBlock&amp)&nbspconst;<br>&nbsp&nbsp&nbsp&nbspbool&nbspoperator!=(const&nbspBlock&amp)&nbspconst;<br>&nbsp&nbsp&nbsp&nbspsize_t&nbspsize()&nbspconst;<br>&nbsp&nbspprivate:<br>&nbsp&nbsp&nbsp&nbspstd::vector&ltByte&gt&nbspbytes_;<br>&nbsp&nbsp};<br><br>&nbsp&nbsp/////////////////////////////////////////////////////////<br>&nbsp&nbsp//&nbspFile<br>&nbsp&nbsp<br>&nbsp&nbspclass&nbspFile<br>&nbsp&nbsp{<br>&nbsp&nbsppublic:<br>&nbsp&nbsp&nbsp&nbspenum&nbspdirection&nbsp{&nbspin,&nbspout&nbsp};<br>&nbsp&nbsp&nbsp&nbspenum&nbsptype&nbsp{&nbsptext,&nbspbinary&nbsp};<br>&nbsp&nbsp&nbsp&nbspFile(const&nbspstd::string&amp&nbspfilespec);<br>&nbsp&nbsp&nbsp&nbspbool&nbspopen(direction&nbspdirn,&nbsptype&nbsptyp=File::text);<br>&nbsp&nbsp&nbsp&nbsp~File();<br>&nbsp&nbsp&nbsp&nbspstd::string&nbspname();<br>&nbsp&nbsp&nbsp&nbspstd::string&nbspgetLine();<br>&nbsp&nbsp&nbsp&nbspvoid&nbspputLine(const&nbspstd::string&amp&nbspline,&nbspbool&nbspwantReturn=true);<br>&nbsp&nbsp&nbsp&nbspBlock&nbspgetBlock(size_t&nbspsize);<br>&nbsp&nbsp&nbsp&nbspvoid&nbspputBlock(const&nbspBlock&amp);<br>&nbsp&nbsp&nbsp&nbspbool&nbspisGood();<br>&nbsp&nbsp&nbsp&nbspvoid&nbspclear();<br>&nbsp&nbsp&nbsp&nbspvoid&nbspflush();<br>&nbsp&nbsp&nbsp&nbspvoid&nbspclose();<br>&nbsp&nbsp&nbsp&nbspstatic&nbspbool&nbspexists(const&nbspstd::string&amp&nbspfile);<br>&nbsp&nbsp&nbsp&nbspstatic&nbspbool&nbspcopy(const&nbspstd::string&amp&nbspsrc,&nbspconst&nbspstd::string&amp&nbspdst,&nbspbool&nbspfailIfExists=false);<br>&nbsp&nbsp&nbsp&nbspstatic&nbspbool&nbspremove(const&nbspstd::string&amp&nbspfilespec);<br>&nbsp&nbspprivate:<br>&nbsp&nbsp&nbsp&nbspstd::string&nbspname_;<br>&nbsp&nbsp&nbsp&nbspstd::ifstream*&nbsppIStream;<br>&nbsp&nbsp&nbsp&nbspstd::ofstream*&nbsppOStream;<br>&nbsp&nbsp&nbsp&nbspdirection&nbspdirn_;<br>&nbsp&nbsp&nbsp&nbsptype&nbsptyp_;<br>&nbsp&nbsp&nbsp&nbspbool&nbspgood_;<br>&nbsp&nbsp};<br><br>&nbsp&nbspinline&nbspstd::string&nbspFile::name()&nbsp{&nbspreturn&nbspname_;&nbsp}<br><br>&nbsp&nbsp/////////////////////////////////////////////////////////<br>&nbsp&nbsp//&nbspFileInfo<br><br>&nbsp&nbspclass&nbspFileInfo<br>&nbsp&nbsp{<br>&nbsp&nbsppublic:<br>&nbsp&nbsp&nbsp&nbspenum&nbspdateFormat&nbsp{&nbspfullformat,&nbsptimeformat,&nbspdateformat&nbsp};<br>&nbsp&nbsp&nbsp&nbspFileInfo(const&nbspstd::string&amp&nbspfileSpec);<br>&nbsp&nbsp&nbsp&nbspbool&nbspgood();<br>&nbsp&nbsp&nbsp&nbspstd::string&nbspname()&nbspconst;<br>&nbsp&nbsp&nbsp&nbspstd::string&nbspdate(dateFormat&nbspdf=fullformat)&nbspconst;<br>&nbsp&nbsp&nbsp&nbspsize_t&nbspsize()&nbspconst;<br>&nbsp&nbsp&nbsp&nbsp<br>&nbsp&nbsp&nbsp&nbspbool&nbspisArchive()&nbspconst;<br>&nbsp&nbsp&nbsp&nbspbool&nbspisCompressed()&nbspconst;<br>&nbsp&nbsp&nbsp&nbspbool&nbspisDirectory()&nbspconst;<br>&nbsp&nbsp&nbsp&nbspbool&nbspisEncrypted()&nbspconst;<br>&nbsp&nbsp&nbsp&nbspbool&nbspisHidden()&nbspconst;<br>&nbsp&nbsp&nbsp&nbspbool&nbspisNormal()&nbspconst;<br>&nbsp&nbsp&nbsp&nbspbool&nbspisOffLine()&nbspconst;<br>&nbsp&nbsp&nbsp&nbspbool&nbspisReadOnly()&nbspconst;<br>&nbsp&nbsp&nbsp&nbspbool&nbspisSystem()&nbspconst;<br>&nbsp&nbsp&nbsp&nbspbool&nbspisTemporary()&nbspconst;<br><br>&nbsp&nbsp&nbsp&nbspbool&nbspoperator&lt(const&nbspFileInfo&amp&nbspfi)&nbspconst;<br>&nbsp&nbsp&nbsp&nbspbool&nbspoperator==(const&nbspFileInfo&amp&nbspfi)&nbspconst;<br>&nbsp&nbsp&nbsp&nbspbool&nbspoperator&gt(const&nbspFileInfo&amp&nbspfi)&nbspconst;<br>&nbsp&nbsp&nbsp&nbspbool&nbspearlier(const&nbspFileInfo&amp&nbspfi)&nbspconst;<br>&nbsp&nbsp&nbsp&nbspbool&nbsplater(const&nbspFileInfo&amp&nbspfi)&nbspconst;<br>&nbsp&nbsp&nbsp&nbspbool&nbspsmaller(const&nbspFileInfo&amp&nbspfi)&nbspconst;<br>&nbsp&nbsp&nbsp&nbspbool&nbsplarger(const&nbspFileInfo&amp&nbspfi)&nbspconst;<br>&nbsp&nbspprivate:<br>&nbsp&nbsp&nbsp&nbspbool&nbsperror_;<br>&nbsp&nbsp&nbsp&nbspstatic&nbspstd::string&nbspintToString(long&nbspi);<br>&nbsp&nbsp&nbsp&nbspstruct&nbspstat&nbspstatbuf_;<br>&nbsp&nbsp&nbsp&nbspstd::string&nbspfileSpec_;<br>&nbsp&nbsp};<br><br>&nbsp&nbsp/////////////////////////////////////////////////////////<br>&nbsp&nbsp//&nbspPath<br><br>&nbsp&nbspclass&nbspPath<br>&nbsp&nbsp{<br>&nbsp&nbsppublic:<br>&nbsp&nbsp&nbsp&nbspstatic&nbspstd::string&nbspgetFullFileSpec(const&nbspstd::string&amp&nbspfileSpec);<br>&nbsp&nbsp&nbsp&nbspstatic&nbspstd::string&nbspgetPath(const&nbspstd::string&amp&nbspfileSpec);<br>&nbsp&nbsp&nbsp&nbspstatic&nbspstd::string&nbspgetName(const&nbspstd::string&amp&nbspfileSpec,&nbspbool&nbspwithExt=true);<br>&nbsp&nbsp&nbsp&nbspstatic&nbspstd::string&nbspgetExt(const&nbspstd::string&amp&nbspfileSpec);<br>&nbsp&nbsp&nbsp&nbspstatic&nbspstd::string&nbspfileSpec(const&nbspstd::string&amp&nbsppath,&nbspconst&nbspstd::string&amp&nbspname);<br>&nbsp&nbsp&nbsp&nbspstatic&nbspstd::string&nbsptoLower(const&nbspstd::string&amp&nbspsrc);<br>&nbsp&nbsp&nbsp&nbspstatic&nbspstd::string&nbsptoUpper(const&nbspstd::string&amp&nbspsrc);<br>&nbsp&nbsp};<br>&nbsp&nbsp<br>&nbsp&nbsp/////////////////////////////////////////////////////////<br>&nbsp&nbsp//&nbspDirectory<br><br>&nbsp&nbspclass&nbspDirectory<br>&nbsp&nbsp{<br>&nbsp&nbsppublic:<br>&nbsp&nbsp&nbsp&nbspstatic&nbspbool&nbspcreate(const&nbspstd::string&amp&nbsppath);<br>&nbsp&nbsp&nbsp&nbspstatic&nbspbool&nbspremove(const&nbspstd::string&amp&nbsppath);<br>&nbsp&nbsp&nbsp&nbspstatic&nbspbool&nbspexists(const&nbspstd::string&amp&nbsppath);<br>&nbsp&nbsp&nbsp&nbspstatic&nbspstd::string&nbspgetCurrentDirectory();<br>&nbsp&nbsp&nbsp&nbspstatic&nbspbool&nbspsetCurrentDirectory(const&nbspstd::string&amp&nbsppath);<br>&nbsp&nbsp&nbsp&nbspstatic&nbspstd::vector&ltstd::string&gt&nbspgetFiles(const&nbspstd::string&amp&nbsppath=&quot.&quot,&nbspconst&nbspstd::string&amp&nbsppattern=&quot*.*&quot);<br>&nbsp&nbsp&nbsp&nbspstatic&nbspstd::vector&ltstd::string&gt&nbspgetDirectories(const&nbspstd::string&amp&nbsppath=&quot.&quot,&nbspconst&nbspstd::string&amp&nbsppattern=&quot*.*&quot);<br>&nbsp&nbspprivate:<br>&nbsp&nbsp&nbsp&nbspstatic&nbspconst&nbspint&nbspBufSize&nbsp=&nbsp255;<br>&nbsp&nbsp&nbsp&nbspchar&nbspbuffer[BufSize];<br>&nbsp&nbsp};<br>}<br><br>#endif<br></div>
</body>
</html>
