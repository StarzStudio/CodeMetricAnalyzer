{"version":3,"sources":["text.js"],"names":[],"mappings":"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","file":"text-compiled.js","sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\ndefine(function(require, exports, module) {\n\"use strict\";\n\nvar Tokenizer = require(\"../tokenizer\").Tokenizer;\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\nvar CstyleBehaviour = require(\"./behaviour/cstyle\").CstyleBehaviour;\nvar unicode = require(\"../unicode\");\nvar lang = require(\"../lib/lang\");\nvar TokenIterator = require(\"../token_iterator\").TokenIterator;\nvar Range = require(\"../range\").Range;\n\nvar Mode = function() {\n    this.HighlightRules = TextHighlightRules;\n};\n\n(function() {\n    this.$defaultBehaviour = new CstyleBehaviour();\n\n    this.tokenRe = new RegExp(\"^[\"\n        + unicode.packages.L\n        + unicode.packages.Mn + unicode.packages.Mc\n        + unicode.packages.Nd\n        + unicode.packages.Pc + \"\\\\$_]+\", \"g\"\n    );\n\n    this.nonTokenRe = new RegExp(\"^(?:[^\"\n        + unicode.packages.L\n        + unicode.packages.Mn + unicode.packages.Mc\n        + unicode.packages.Nd\n        + unicode.packages.Pc + \"\\\\$_]|\\\\s])+\", \"g\"\n    );\n\n    this.getTokenizer = function() {\n        if (!this.$tokenizer) {\n            this.$highlightRules = this.$highlightRules || new this.HighlightRules(this.$highlightRuleConfig);\n            this.$tokenizer = new Tokenizer(this.$highlightRules.getRules());\n        }\n        return this.$tokenizer;\n    };\n\n    this.lineCommentStart = \"\";\n    this.blockComment = \"\";\n\n    this.toggleCommentLines = function(state, session, startRow, endRow) {\n        var doc = session.doc;\n\n        var ignoreBlankLines = true;\n        var shouldRemove = true;\n        var minIndent = Infinity;\n        var tabSize = session.getTabSize();\n        var insertAtTabStop = false;\n\n        if (!this.lineCommentStart) {\n            if (!this.blockComment)\n                return false;\n            var lineCommentStart = this.blockComment.start;\n            var lineCommentEnd = this.blockComment.end;\n            var regexpStart = new RegExp(\"^(\\\\s*)(?:\" + lang.escapeRegExp(lineCommentStart) + \")\");\n            var regexpEnd = new RegExp(\"(?:\" + lang.escapeRegExp(lineCommentEnd) + \")\\\\s*$\");\n\n            var comment = function(line, i) {\n                if (testRemove(line, i))\n                    return;\n                if (!ignoreBlankLines || /\\S/.test(line)) {\n                    doc.insertInLine({row: i, column: line.length}, lineCommentEnd);\n                    doc.insertInLine({row: i, column: minIndent}, lineCommentStart);\n                }\n            };\n\n            var uncomment = function(line, i) {\n                var m;\n                if (m = line.match(regexpEnd))\n                    doc.removeInLine(i, line.length - m[0].length, line.length);\n                if (m = line.match(regexpStart))\n                    doc.removeInLine(i, m[1].length, m[0].length);\n            };\n\n            var testRemove = function(line, row) {\n                if (regexpStart.test(line))\n                    return true;\n                var tokens = session.getTokens(row);\n                for (var i = 0; i < tokens.length; i++) {\n                    if (tokens[i].type === \"comment\")\n                        return true;\n                }\n            };\n        } else {\n            if (Array.isArray(this.lineCommentStart)) {\n                var regexpStart = this.lineCommentStart.map(lang.escapeRegExp).join(\"|\");\n                var lineCommentStart = this.lineCommentStart[0];\n            } else {\n                var regexpStart = lang.escapeRegExp(this.lineCommentStart);\n                var lineCommentStart = this.lineCommentStart;\n            }\n            regexpStart = new RegExp(\"^(\\\\s*)(?:\" + regexpStart + \") ?\");\n            \n            insertAtTabStop = session.getUseSoftTabs();\n\n            var uncomment = function(line, i) {\n                var m = line.match(regexpStart);\n                if (!m) return;\n                var start = m[1].length, end = m[0].length;\n                if (!shouldInsertSpace(line, start, end) && m[0][end - 1] == \" \")\n                    end--;\n                doc.removeInLine(i, start, end);\n            };\n            var commentWithSpace = lineCommentStart + \" \";\n            var comment = function(line, i) {\n                if (!ignoreBlankLines || /\\S/.test(line)) {\n                    if (shouldInsertSpace(line, minIndent, minIndent))\n                        doc.insertInLine({row: i, column: minIndent}, commentWithSpace);\n                    else\n                        doc.insertInLine({row: i, column: minIndent}, lineCommentStart);\n                }\n            };\n            var testRemove = function(line, i) {\n                return regexpStart.test(line);\n            };\n            \n            var shouldInsertSpace = function(line, before, after) {\n                var spaces = 0;\n                while (before-- && line.charAt(before) == \" \")\n                    spaces++;\n                if (spaces % tabSize != 0)\n                    return false;\n                var spaces = 0;\n                while (line.charAt(after++) == \" \")\n                    spaces++;\n                if (tabSize > 2)\n                    return spaces % tabSize != tabSize - 1;\n                else\n                    return spaces % tabSize == 0;\n                return true;\n            };\n        }\n\n        function iter(fun) {\n            for (var i = startRow; i <= endRow; i++)\n                fun(doc.getLine(i), i);\n        }\n\n\n        var minEmptyLength = Infinity;\n        iter(function(line, i) {\n            var indent = line.search(/\\S/);\n            if (indent !== -1) {\n                if (indent < minIndent)\n                    minIndent = indent;\n                if (shouldRemove && !testRemove(line, i))\n                    shouldRemove = false;\n            } else if (minEmptyLength > line.length) {\n                minEmptyLength = line.length;\n            }\n        });\n\n        if (minIndent == Infinity) {\n            minIndent = minEmptyLength;\n            ignoreBlankLines = false;\n            shouldRemove = false;\n        }\n\n        if (insertAtTabStop && minIndent % tabSize != 0)\n            minIndent = Math.floor(minIndent / tabSize) * tabSize;\n\n        iter(shouldRemove ? uncomment : comment);\n    };\n\n    this.toggleBlockComment = function(state, session, range, cursor) {\n        var comment = this.blockComment;\n        if (!comment)\n            return;\n        if (!comment.start && comment[0])\n            comment = comment[0];\n\n        var iterator = new TokenIterator(session, cursor.row, cursor.column);\n        var token = iterator.getCurrentToken();\n\n        var sel = session.selection;\n        var initialRange = session.selection.toOrientedRange();\n        var startRow, colDiff;\n\n        if (token && /comment/.test(token.type)) {\n            var startRange, endRange;\n            while (token && /comment/.test(token.type)) {\n                var i = token.value.indexOf(comment.start);\n                if (i != -1) {\n                    var row = iterator.getCurrentTokenRow();\n                    var column = iterator.getCurrentTokenColumn() + i;\n                    startRange = new Range(row, column, row, column + comment.start.length);\n                    break;\n                }\n                token = iterator.stepBackward();\n            }\n\n            var iterator = new TokenIterator(session, cursor.row, cursor.column);\n            var token = iterator.getCurrentToken();\n            while (token && /comment/.test(token.type)) {\n                var i = token.value.indexOf(comment.end);\n                if (i != -1) {\n                    var row = iterator.getCurrentTokenRow();\n                    var column = iterator.getCurrentTokenColumn() + i;\n                    endRange = new Range(row, column, row, column + comment.end.length);\n                    break;\n                }\n                token = iterator.stepForward();\n            }\n            if (endRange)\n                session.remove(endRange);\n            if (startRange) {\n                session.remove(startRange);\n                startRow = startRange.start.row;\n                colDiff = -comment.start.length;\n            }\n        } else {\n            colDiff = comment.start.length;\n            startRow = range.start.row;\n            session.insert(range.end, comment.end);\n            session.insert(range.start, comment.start);\n        }\n        // todo: selection should have ended up in the right place automatically!\n        if (initialRange.start.row == startRow)\n            initialRange.start.column += colDiff;\n        if (initialRange.end.row == startRow)\n            initialRange.end.column += colDiff;\n        session.selection.fromOrientedRange(initialRange);\n    };\n\n    this.getNextLineIndent = function(state, line, tab) {\n        return this.$getIndent(line);\n    };\n\n    this.checkOutdent = function(state, line, input) {\n        return false;\n    };\n\n    this.autoOutdent = function(state, doc, row) {\n    };\n\n    this.$getIndent = function(line) {\n        return line.match(/^\\s*/)[0];\n    };\n\n    this.createWorker = function(session) {\n        return null;\n    };\n\n    this.createModeDelegates = function (mapping) {\n        this.$embeds = [];\n        this.$modes = {};\n        for (var i in mapping) {\n            if (mapping[i]) {\n                this.$embeds.push(i);\n                this.$modes[i] = new mapping[i]();\n            }\n        }\n\n        var delegations = [\"toggleBlockComment\", \"toggleCommentLines\", \"getNextLineIndent\", \n            \"checkOutdent\", \"autoOutdent\", \"transformAction\", \"getCompletions\"];\n\n        for (var i = 0; i < delegations.length; i++) {\n            (function(scope) {\n              var functionName = delegations[i];\n              var defaultHandler = scope[functionName];\n              scope[delegations[i]] = function() {\n                  return this.$delegator(functionName, arguments, defaultHandler);\n              };\n            }(this));\n        }\n    };\n\n    this.$delegator = function(method, args, defaultHandler) {\n        var state = args[0];\n        if (typeof state != \"string\")\n            state = state[0];\n        for (var i = 0; i < this.$embeds.length; i++) {\n            if (!this.$modes[this.$embeds[i]]) continue;\n\n            var split = state.split(this.$embeds[i]);\n            if (!split[0] && split[1]) {\n                args[0] = split[1];\n                var mode = this.$modes[this.$embeds[i]];\n                return mode[method].apply(mode, args);\n            }\n        }\n        var ret = defaultHandler.apply(this, args);\n        return defaultHandler ? ret : undefined;\n    };\n\n    this.transformAction = function(state, action, editor, session, param) {\n        if (this.$behaviour) {\n            var behaviours = this.$behaviour.getBehaviours();\n            for (var key in behaviours) {\n                if (behaviours[key][action]) {\n                    var ret = behaviours[key][action].apply(this, arguments);\n                    if (ret) {\n                        return ret;\n                    }\n                }\n            }\n        }\n    };\n    \n    this.getKeywords = function(append) {\n        // this is for autocompletion to pick up regexp'ed keywords\n        if (!this.completionKeywords) {\n            var rules = this.$tokenizer.rules;\n            var completionKeywords = [];\n            for (var rule in rules) {\n                var ruleItr = rules[rule];\n                for (var r = 0, l = ruleItr.length; r < l; r++) {\n                    if (typeof ruleItr[r].token === \"string\") {\n                        if (/keyword|support|storage/.test(ruleItr[r].token))\n                            completionKeywords.push(ruleItr[r].regex);\n                    }\n                    else if (typeof ruleItr[r].token === \"object\") {\n                        for (var a = 0, aLength = ruleItr[r].token.length; a < aLength; a++) {    \n                            if (/keyword|support|storage/.test(ruleItr[r].token[a])) {\n                                // drop surrounding parens\n                                var rule = ruleItr[r].regex.match(/\\(.+?\\)/g)[a];\n                                completionKeywords.push(rule.substr(1, rule.length - 2));\n                            }\n                        }\n                    }\n                }\n            }\n            this.completionKeywords = completionKeywords;\n        }\n        // this is for highlighting embed rules, like HAML/Ruby or Obj-C/C\n        if (!append)\n            return this.$keywordList;\n        return completionKeywords.concat(this.$keywordList || []);\n    };\n    \n    this.$createKeywordList = function() {\n        if (!this.$highlightRules)\n            this.getTokenizer();\n        return this.$keywordList = this.$highlightRules.$keywordList || [];\n    };\n\n    this.getCompletions = function(state, session, pos, prefix) {\n        var keywords = this.$keywordList || this.$createKeywordList();\n        return keywords.map(function(word) {\n            return {\n                name: word,\n                value: word,\n                score: 0,\n                meta: \"keyword\"\n            };\n        });\n    };\n\n    this.$id = \"ace/mode/text\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n});\n"]}