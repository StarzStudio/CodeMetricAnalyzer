{"version":3,"sources":["markdown.js"],"names":[],"mappings":"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","file":"markdown-compiled.js","sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\ndefine(function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../../lib/oop\");\nvar BaseFoldMode = require(\"./fold_mode\").FoldMode;\nvar Range = require(\"../../range\").Range;\n\nvar FoldMode = exports.FoldMode = function() {};\noop.inherits(FoldMode, BaseFoldMode);\n\n(function() {\n    this.foldingStartMarker = /^(?:[=-]+\\s*$|#{1,6} |`{3})/;\n\n    this.getFoldWidget = function(session, foldStyle, row) {\n        var line = session.getLine(row);\n        if (!this.foldingStartMarker.test(line))\n            return \"\";\n\n        if (line[0] == \"`\") {\n            if (session.bgTokenizer.getState(row) == \"start\")\n                return \"end\";\n            return \"start\";\n        }\n\n        return \"start\";\n    };\n\n    this.getFoldWidgetRange = function(session, foldStyle, row) {\n        var line = session.getLine(row);\n        var startColumn = line.length;\n        var maxRow = session.getLength();\n        var startRow = row;\n        var endRow = row;\n        if (!line.match(this.foldingStartMarker))\n            return;\n\n        if (line[0] == \"`\") {\n            if (session.bgTokenizer.getState(row) !== \"start\") {\n                while (++row < maxRow) {\n                    line = session.getLine(row);\n                    if (line[0] == \"`\" & line.substring(0, 3) == \"```\")\n                        break;\n                }\n                return new Range(startRow, startColumn, row, 0);\n            } else {\n                while (row -- > 0) {\n                    line = session.getLine(row);\n                    if (line[0] == \"`\" & line.substring(0, 3) == \"```\")\n                        break;\n                }\n                return new Range(row, line.length, startRow, 0);\n            }\n        }\n\n        var token;\n        function isHeading(row) {\n            token = session.getTokens(row)[0];\n            return token && token.type.lastIndexOf(heading, 0) === 0;\n        }\n\n        var heading = \"markup.heading\";\n        function getLevel() {\n            var ch = token.value[0];\n            if (ch == \"=\") return 6;\n            if (ch == \"-\") return 5;\n            return 7 - token.value.search(/[^#]/);\n        }\n\n        if (isHeading(row)) {\n            var startHeadingLevel = getLevel();\n            while (++row < maxRow) {\n                if (!isHeading(row))\n                    continue;\n                var level = getLevel();\n                if (level >= startHeadingLevel)\n                    break;\n            }\n\n            endRow = row - (!token || [\"=\", \"-\"].indexOf(token.value[0]) == -1 ? 1 : 2);\n\n            if (endRow > startRow) {\n                while (endRow > startRow && /^\\s*$/.test(session.getLine(endRow)))\n                    endRow--;\n            }\n\n            if (endRow > startRow) {\n                var endColumn = session.getLine(endRow).length;\n                return new Range(startRow, startColumn, endRow, endColumn);\n            }\n        }\n    };\n\n}).call(FoldMode.prototype);\n\n});\n"]}