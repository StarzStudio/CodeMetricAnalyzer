{"version":3,"sources":["coffee_test.js"],"names":[],"mappings":"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","file":"coffee_test-compiled.js","sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\nif (typeof process !== \"undefined\")\n    require(\"amd-loader\");\n\ndefine(function(require, exports, module) {\n\"use strict\";\n\nvar CoffeeMode = require(\"../coffee\").Mode;\nvar EditSession = require(\"../../edit_session\").EditSession;\nvar assert = require(\"../../test/assertions\");\nfunction testFoldWidgets(array) {\n    var session = array.filter(function(_, i){return i % 2 == 1});\n    session = new EditSession(session);\n    var mode = new CoffeeMode();\n    session.setFoldStyle(\"markbeginend\");\n    session.setMode(mode);\n\n    var widgets = array.filter(function(_, i){return i % 2 == 0});\n    widgets.forEach(function(w, i){\n        session.foldWidgets[i] = session.getFoldWidget(i);\n    })\n    widgets.forEach(function(w, i){\n        w = w.split(\",\");\n        var type = w[0] == \">\" ? \"start\" : w[0] == \"<\" ? \"end\" : \"\";\n        assert.equal(session.foldWidgets[i], type);\n        if (!type)\n            return;\n        var range = session.getFoldWidgetRange(i);\n        if (!w[1]) {\n            assert.equal(range, null);\n            return;\n        }\n        assert.equal(range.start.row, i);\n        assert.equal(range.end.row - range.start.row, parseInt(w[1]));\n        testColumn(w[2], range.start);\n        testColumn(w[3], range.end);\n    });\n\n    function testColumn(w, pos) {\n        if (!w)\n            return;\n        if (w == \"l\")\n            w = session.getLine(pos.row).length;\n        else\n            w = parseInt(w);\n        assert.equal(pos.column, w);\n    }\n}\nmodule.exports = {\n    \"test: coffee script indentation based folding\": function() {\n       testFoldWidgets([\n            '>,1,l,l',         ' ## indented comment',\n            '',                '  # ',\n            '',                '',\n            '>,1,l,l',         ' # plain comment',\n            '',                ' # ',\n            '>,2',             ' function (x)=>',\n            '',                '  ',\n            '',                '  x++',\n            '',                '  ',\n            '',                '  ',\n            '>,2',             ' bar = ',\n            '',                '   foo: 1',\n            '',                '   baz: lighter'\n        ]);\n    }\n};\n\n});\n\nif (typeof module !== \"undefined\" && module === require.main)\n    require(\"asyncjs\").test.testcase(module.exports).exec();\n"]}