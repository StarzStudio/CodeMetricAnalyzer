{"version":3,"sources":["html_test.js"],"names":[],"mappings":";;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,IAAI,OAAO,OAAP,KAAmB,WAAvB,EACI,QAAQ,YAAR;;AAEJ,OAAO,UAAS,OAAT,EAAkB,OAAlB,EAA2B,MAA3B,EAAmC;AAC1C;;AAEA,QAAI,WAAW,QAAQ,SAAR,EAAmB,IAAlC;AACA,QAAI,cAAc,QAAQ,oBAAR,EAA8B,WAAhD;AACA,QAAI,SAAS,QAAQ,uBAAR,CAAb;;AAEA,WAAO,OAAP,GAAiB;;AAEb,gDAAwC,0CAAW;AAC/C,gBAAI,UAAU,IAAI,WAAJ,CAAgB,CAC1B,kCAD0B,EAE1B,kBAF0B,EAG1B,kBAH0B,EAI1B,GAJ0B,EAK1B,WAL0B,CAAhB,CAAd;;AAQA,gBAAI,OAAO,IAAI,QAAJ,EAAX;AACA,oBAAQ,OAAR,CAAgB,IAAhB;AACA,oBAAQ,YAAR,CAAqB,cAArB;;AAEA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,OAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,OAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,EAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,KAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,KAAvC;;AAEA,mBAAO,KAAP,CAAa,QAAQ,kBAAR,CAA2B,CAA3B,CAAb,EAA4C,CAA5C,EAA+C,EAA/C,EAAmD,CAAnD,EAAsD,CAAtD;AACA,mBAAO,KAAP,CAAa,QAAQ,kBAAR,CAA2B,CAA3B,CAAb,EAA4C,CAA5C,EAA+C,EAA/C,EAAmD,CAAnD,EAAsD,CAAtD;;AAEA,mBAAO,KAAP,CAAa,QAAQ,kBAAR,CAA2B,CAA3B,CAAb,EAA4C,CAA5C,EAA+C,EAA/C,EAAmD,CAAnD,EAAsD,CAAtD;AACA,mBAAO,KAAP,CAAa,QAAQ,kBAAR,CAA2B,CAA3B,CAAb,EAA4C,CAA5C,EAA+C,EAA/C,EAAmD,CAAnD,EAAsD,CAAtD;AACH,SA1BY;;AA4Bb,yCAAiC,mCAAW;AACxC,gBAAI,UAAU,IAAI,WAAJ,CAAgB,CAC1B,yBAD0B,EAE1B,mBAF0B,EAG1B,wDAH0B,EAI1B,OAJ0B,EAK1B,UAL0B,CAAhB,CAAd;;AAQA,gBAAI,OAAO,IAAI,QAAJ,EAAX;AACA,oBAAQ,OAAR,CAAgB,IAAhB;AACA,oBAAQ,YAAR,CAAqB,cAArB;;AAEA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,OAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,OAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,EAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,KAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,KAAvC;;AAEA,mBAAO,KAAP,CAAa,QAAQ,kBAAR,CAA2B,CAA3B,CAAb,EAA4C,CAA5C,EAA+C,EAA/C,EAAmD,CAAnD,EAAsD,CAAtD;AACA,mBAAO,KAAP,CAAa,QAAQ,kBAAR,CAA2B,CAA3B,CAAb,EAA4C,CAA5C,EAA+C,EAA/C,EAAmD,CAAnD,EAAsD,CAAtD;;AAEA,mBAAO,KAAP,CAAa,QAAQ,kBAAR,CAA2B,CAA3B,CAAb,EAA4C,CAA5C,EAA+C,EAA/C,EAAmD,CAAnD,EAAsD,CAAtD;AACA,mBAAO,KAAP,CAAa,QAAQ,kBAAR,CAA2B,CAA3B,CAAb,EAA4C,CAA5C,EAA+C,EAA/C,EAAmD,CAAnD,EAAsD,CAAtD;AACH,SApDY;;AAsDb,wDAAgD,iDAAW;AACvD,gBAAI,UAAU,IAAI,WAAJ,CAAgB,CAC1B,QAD0B,EAE1B,QAF0B,EAG1B,SAH0B,CAAhB,CAAd;;AAMA,gBAAI,OAAO,IAAI,QAAJ,EAAX;AACA,oBAAQ,OAAR,CAAgB,IAAhB;AACA,oBAAQ,YAAR,CAAqB,cAArB;;AAEA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,OAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,EAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,KAAvC;;AAEA,mBAAO,KAAP,CAAa,QAAQ,kBAAR,CAA2B,CAA3B,CAAb,EAA4C,CAA5C,EAA+C,CAA/C,EAAkD,CAAlD,EAAqD,CAArD;AACA,mBAAO,KAAP,CAAa,QAAQ,kBAAR,CAA2B,CAA3B,CAAb,EAA4C,CAA5C,EAA+C,CAA/C,EAAkD,CAAlD,EAAqD,CAArD;AACH,SAvEY;;AAyEb,gDAAwC,0CAAW;AAC/C,gBAAI,UAAU,IAAI,WAAJ,CAAgB,CAC1B,QAD0B,EAE1B,MAF0B,EAG1B,SAH0B,CAAhB,CAAd;;AAMA,gBAAI,OAAO,IAAI,QAAJ,EAAX;AACA,oBAAQ,OAAR,CAAgB,IAAhB;AACA,oBAAQ,YAAR,CAAqB,cAArB;;AAEA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,OAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,EAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,KAAvC;;AAEA,mBAAO,KAAP,CAAa,QAAQ,kBAAR,CAA2B,CAA3B,CAAb,EAA4C,CAA5C,EAA+C,CAA/C,EAAkD,CAAlD,EAAqD,CAArD;AACA,mBAAO,KAAP,CAAa,QAAQ,kBAAR,CAA2B,CAA3B,CAAb,EAA4C,CAA5C,EAA+C,CAA/C,EAAkD,CAAlD,EAAqD,CAArD;AACH,SA1FY;;AA4Fb,iDAAyC,4CAAW;AAChD,gBAAI,UAAU,IAAI,WAAJ,CAAgB,CAC1B,OAD0B,EAE1B,KAF0B,EAG1B,MAH0B,EAI1B,KAJ0B,EAK1B,SAL0B,EAM1B,QAN0B,CAAhB,CAAd;;AASA,gBAAI,OAAO,IAAI,QAAJ,EAAX;AACA,oBAAQ,OAAR,CAAgB,IAAhB;AACA,oBAAQ,YAAR,CAAqB,cAArB;;AAEA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,OAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,OAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,EAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,OAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,EAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,KAAvC;;AAEA,mBAAO,KAAP,CAAa,QAAQ,kBAAR,CAA2B,CAA3B,CAAb,EAA4C,CAA5C,EAA+C,CAA/C,EAAkD,CAAlD,EAAqD,CAArD;AACA,mBAAO,KAAP,CAAa,QAAQ,kBAAR,CAA2B,CAA3B,CAAb,EAA4C,CAA5C,EAA+C,CAA/C,EAAkD,CAAlD,EAAqD,CAArD;AACH,SAnHY;;AAqHb,wDAAgD,kDAAW;AACvD,gBAAI,UAAU,IAAI,WAAJ,CAAgB,CAC1B,KAD0B,EAE1B,MAF0B,EAG1B,SAH0B,EAI1B,KAJ0B,EAK1B,SAL0B,EAM1B,OAN0B,CAAhB,CAAd;;AASA,gBAAI,OAAO,IAAI,QAAJ,EAAX;AACA,oBAAQ,OAAR,CAAgB,IAAhB;AACA,oBAAQ,YAAR,CAAqB,cAArB;;AAEA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,OAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,OAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,OAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,OAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,EAAvC;AACA,mBAAO,KAAP,CAAa,QAAQ,aAAR,CAAsB,CAAtB,CAAb,EAAuC,KAAvC;;AAEA,mBAAO,KAAP,CAAa,QAAQ,kBAAR,CAA2B,CAA3B,CAAb,EAA4C,CAA5C,EAA+C,CAA/C,EAAkD,CAAlD,EAAqD,CAArD;AACH;AA3IY,KAAjB;AA8IC,CArJD;;AAuJA,IAAI,OAAO,MAAP,KAAkB,WAAlB,IAAiC,WAAW,QAAQ,IAAxD,EACI,QAAQ,SAAR,EAAmB,IAAnB,CAAwB,QAAxB,CAAiC,OAAO,OAAxC,EAAiD,IAAjD","file":"html_test-compiled.js","sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\nif (typeof process !== \"undefined\")\n    require(\"amd-loader\");\n\ndefine(function(require, exports, module) {\n\"use strict\";\n\nvar HtmlMode = require(\"../html\").Mode;\nvar EditSession = require(\"../../edit_session\").EditSession;\nvar assert = require(\"../../test/assertions\");\n\nmodule.exports = {\n\n    \"test: fold mixed html and javascript\": function() {\n        var session = new EditSession([\n            '<script type=\"text/javascript\"> ',\n            'function() foo {',\n            '    var bar = 1;',\n            '}',\n            '</script>'\n        ]);\n        \n        var mode = new HtmlMode();\n        session.setMode(mode);\n        session.setFoldStyle(\"markbeginend\");\n        \n        assert.equal(session.getFoldWidget(0), \"start\");\n        assert.equal(session.getFoldWidget(1), \"start\");\n        assert.equal(session.getFoldWidget(2), \"\");\n        assert.equal(session.getFoldWidget(3), \"end\");\n        assert.equal(session.getFoldWidget(4), \"end\");\n        \n        assert.range(session.getFoldWidgetRange(0), 0, 31, 4, 0);\n        assert.range(session.getFoldWidgetRange(4), 0, 31, 4, 0);\n        \n        assert.range(session.getFoldWidgetRange(1), 1, 16, 3, 0);\n        assert.range(session.getFoldWidgetRange(3), 1, 16, 3, 0);\n    },\n    \n    \"test: fold mixed html and css\": function() {\n        var session = new EditSession([\n            '<style type=\"text/css\">',\n            '    .text-layer {',\n            '        font-family: Monaco, \"Courier New\", monospace;',\n            '    }',\n            '</style>'\n        ]);\n        \n        var mode = new HtmlMode();\n        session.setMode(mode);\n        session.setFoldStyle(\"markbeginend\");\n        \n        assert.equal(session.getFoldWidget(0), \"start\");\n        assert.equal(session.getFoldWidget(1), \"start\");\n        assert.equal(session.getFoldWidget(2), \"\");\n        assert.equal(session.getFoldWidget(3), \"end\");\n        assert.equal(session.getFoldWidget(4), \"end\");\n        \n        assert.range(session.getFoldWidgetRange(0), 0, 23, 4, 0);\n        assert.range(session.getFoldWidgetRange(4), 0, 23, 4, 0);\n        \n        assert.range(session.getFoldWidgetRange(1), 1, 17, 3, 4);\n        assert.range(session.getFoldWidgetRange(3), 1, 17, 3, 4);\n    },\n    \n    \"test: fold should skip self closing elements\": function() {\n        var session = new EditSession([\n            '<body>',\n            '<br />',\n            '</body>'\n        ]);\n        \n        var mode = new HtmlMode();\n        session.setMode(mode);\n        session.setFoldStyle(\"markbeginend\");\n        \n        assert.equal(session.getFoldWidget(0), \"start\");\n        assert.equal(session.getFoldWidget(1), \"\");\n        assert.equal(session.getFoldWidget(2), \"end\");\n        \n        assert.range(session.getFoldWidgetRange(0), 0, 6, 2, 0);\n        assert.range(session.getFoldWidgetRange(2), 0, 6, 2, 0);\n    },\n    \n    \"test: fold should skip void elements\": function() {\n        var session = new EditSession([\n            '<body>',\n            '<br>',\n            '</body>'\n        ]);\n        \n        var mode = new HtmlMode();\n        session.setMode(mode);\n        session.setFoldStyle(\"markbeginend\");\n        \n        assert.equal(session.getFoldWidget(0), \"start\");\n        assert.equal(session.getFoldWidget(1), \"\");\n        assert.equal(session.getFoldWidget(2), \"end\");\n        \n        assert.range(session.getFoldWidgetRange(0), 0, 6, 2, 0);\n        assert.range(session.getFoldWidgetRange(2), 0, 6, 2, 0);\n    },\n    \n    \"test: fold multiple unclosed elements\": function() {\n        var session = new EditSession([\n            '<div>',\n            '<p>',\n            'juhu',\n            '<p>',\n            'kinners',\n            '</div>'\n        ]);\n        \n        var mode = new HtmlMode();\n        session.setMode(mode);\n        session.setFoldStyle(\"markbeginend\");\n        \n        assert.equal(session.getFoldWidget(0), \"start\");\n        assert.equal(session.getFoldWidget(1), \"start\");\n        assert.equal(session.getFoldWidget(2), \"\");\n        assert.equal(session.getFoldWidget(3), \"start\");\n        assert.equal(session.getFoldWidget(4), \"\");\n        assert.equal(session.getFoldWidget(5), \"end\");\n        \n        assert.range(session.getFoldWidgetRange(0), 0, 5, 5, 0);\n        assert.range(session.getFoldWidgetRange(5), 0, 5, 5, 0);\n    },\n    \n    \"test: fold multiple nested optional elements\": function() {\n        var session = new EditSession([\n            '<p>',\n            '<li>',\n            '<p>juhu',\n            '<p>',\n            'kinners',\n            '</li>'\n        ]);\n        \n        var mode = new HtmlMode();\n        session.setMode(mode);\n        session.setFoldStyle(\"markbeginend\");\n        \n        assert.equal(session.getFoldWidget(0), \"start\");\n        assert.equal(session.getFoldWidget(1), \"start\");\n        assert.equal(session.getFoldWidget(2), \"start\");\n        assert.equal(session.getFoldWidget(3), \"start\");\n        assert.equal(session.getFoldWidget(4), \"\");\n        assert.equal(session.getFoldWidget(5), \"end\");\n        \n        assert.range(session.getFoldWidgetRange(1), 1, 4, 5, 0);\n    }\n};\n\n});\n\nif (typeof module !== \"undefined\" && module === require.main)\n    require(\"asyncjs\").test.testcase(module.exports).exec();\n"]}