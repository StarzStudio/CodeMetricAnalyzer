{"version":3,"sources":["fold_mode.js"],"names":[],"mappings":"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","file":"fold_mode-compiled.js","sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\ndefine(function(require, exports, module) {\n\"use strict\";\n\nvar Range = require(\"../../range\").Range;\n\nvar FoldMode = exports.FoldMode = function() {};\n\n(function() {\n\n    this.foldingStartMarker = null;\n    this.foldingStopMarker = null;\n\n    // must return \"\" if there's no fold, to enable caching\n    this.getFoldWidget = function(session, foldStyle, row) {\n        var line = session.getLine(row);\n        if (this.foldingStartMarker.test(line))\n            return \"start\";\n        if (foldStyle == \"markbeginend\"\n                && this.foldingStopMarker\n                && this.foldingStopMarker.test(line))\n            return \"end\";\n        return \"\";\n    };\n\n    this.getFoldWidgetRange = function(session, foldStyle, row) {\n        return null;\n    };\n\n    this.indentationBlock = function(session, row, column) {\n        var re = /\\S/;\n        var line = session.getLine(row);\n        var startLevel = line.search(re);\n        if (startLevel == -1)\n            return;\n\n        var startColumn = column || line.length;\n        var maxRow = session.getLength();\n        var startRow = row;\n        var endRow = row;\n\n        while (++row < maxRow) {\n            var level = session.getLine(row).search(re);\n\n            if (level == -1)\n                continue;\n\n            if (level <= startLevel)\n                break;\n\n            endRow = row;\n        }\n\n        if (endRow > startRow) {\n            var endColumn = session.getLine(endRow).length;\n            return new Range(startRow, startColumn, endRow, endColumn);\n        }\n    };\n\n    this.openingBracketBlock = function(session, bracket, row, column, typeRe) {\n        var start = {row: row, column: column + 1};\n        var end = session.$findClosingBracket(bracket, start, typeRe);\n        if (!end)\n            return;\n\n        var fw = session.foldWidgets[end.row];\n        if (fw == null)\n            fw = session.getFoldWidget(end.row);\n\n        if (fw == \"start\" && end.row > start.row) {\n            end.row --;\n            end.column = session.getLine(end.row).length;\n        }\n        return Range.fromPoints(start, end);\n    };\n\n    this.closingBracketBlock = function(session, bracket, row, column, typeRe) {\n        var end = {row: row, column: column};\n        var start = session.$findOpeningBracket(bracket, end);\n\n        if (!start)\n            return;\n\n        start.column++;\n        end.column--;\n\n        return  Range.fromPoints(start, end);\n    };\n}).call(FoldMode.prototype);\n\n});\n"]}