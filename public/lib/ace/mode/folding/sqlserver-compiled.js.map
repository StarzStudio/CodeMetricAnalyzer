{"version":3,"sources":["sqlserver.js"],"names":[],"mappings":";;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,OAAO,UAAS,OAAT,EAAkB,OAAlB,EAA2B,MAA3B,EAAmC;AAC1C;;AAEA,QAAI,MAAM,QAAQ,eAAR,CAAV;AACA,QAAI,QAAQ,QAAQ,aAAR,EAAuB,KAAnC;AACA,QAAI,eAAe,QAAQ,UAAR,EAAoB,QAAvC;;AAEA,QAAI,WAAW,QAAQ,QAAR,GAAmB,YAAW,CAAE,CAA/C;;AAEA,QAAI,QAAJ,CAAa,QAAb,EAAuB,YAAvB;;AAEA,KAAC,YAAW;AACR;;;;;;;AAOA,aAAK,kBAAL,GAA0B,kCAA1B;AACA;AACA,aAAK,aAAL,GAAqB,yBAArB;;AAEA,aAAK,kBAAL,GAA0B,UAAS,OAAT,EAAkB,SAAlB,EAA6B,GAA7B,EAAkC,cAAlC,EAAkD;AACxE,gBAAI,OAAO,QAAQ,OAAR,CAAgB,GAAhB,CAAX;;AAEA,gBAAI,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAAJ,EAAmC,OAAO,KAAK,qBAAL,CAA2B,OAA3B,EAAoC,IAApC,EAA0C,GAA1C,CAAP;;AAEnC,gBAAI,QAAQ,KAAK,KAAL,CAAW,KAAK,kBAAhB,CAAZ;AACA,gBAAI,KAAJ,EAAW;AACP,oBAAI,IAAI,MAAM,KAAd;AACA,oBAAI,MAAM,CAAN,CAAJ,EAAc,OAAO,KAAK,gBAAL,CAAsB,OAAtB,EAA+B,GAA/B,EAAoC,CAApC,EAAuC,MAAM,CAAN,CAAvC,CAAP;;AAEd,oBAAI,QAAQ,QAAQ,mBAAR,CAA4B,GAA5B,EAAiC,IAAI,MAAM,CAAN,EAAS,MAA9C,EAAsD,CAAtD,CAAZ;AACA,oBAAI,SAAS,CAAC,MAAM,WAAN,EAAd,EAAmC;AAC/B,wBAAI,cAAJ,EAAoB;AAChB,gCAAQ,KAAK,eAAL,CAAqB,OAArB,EAA8B,GAA9B,CAAR;AACH,qBAFD,MAGK,IAAI,aAAa,KAAjB,EAAwB,QAAQ,IAAR;AAChC;;AAED,uBAAO,KAAP;AACH;;AAED,gBAAI,cAAc,WAAlB,EAA+B;AAC/B;AACA;AACH,SAxBD;;AA0BA;;;;AAIA,aAAK,gBAAL,GAAwB,UAAS,OAAT,EAAkB,GAAlB,EAAuB,MAAvB,EAA+B,aAA/B,EAA8C;AAClE,gBAAI,QAAQ;AACR,qBAAK,GADG;AAER,wBAAQ,SAAS,cAAc;AAFvB,aAAZ;AAIA,gBAAI,SAAS,QAAQ,SAAR,EAAb;AACA,gBAAI,IAAJ;;AAEA,gBAAI,QAAQ,CAAZ;AACA,gBAAI,KAAK,iCAAT;AACA,mBAAO,EAAE,GAAF,GAAQ,MAAf,EAAuB;AACnB,uBAAO,QAAQ,OAAR,CAAgB,GAAhB,CAAP;AACA,oBAAI,IAAI,GAAG,IAAH,CAAQ,IAAR,CAAR;AACA,oBAAI,CAAC,CAAL,EAAQ;AACR,oBAAI,EAAE,CAAF,CAAJ,EAAU,QAAV,KACK;;AAEL,oBAAI,CAAC,KAAL,EAAY;AACf;AACD,gBAAI,SAAS,GAAb;AACA,gBAAI,SAAS,MAAM,GAAnB,EAAwB;AACpB,uBAAO,IAAI,KAAJ,CAAU,MAAM,GAAhB,EAAqB,MAAM,MAA3B,EAAmC,MAAnC,EAA2C,KAAK,MAAhD,CAAP;AACH;AACJ,SAvBD;AAyBH,KAnED,EAmEG,IAnEH,CAmEQ,SAAS,SAnEjB;AAqEC,CAhFD","file":"sqlserver-compiled.js","sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\ndefine(function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../../lib/oop\");\nvar Range = require(\"../../range\").Range;\nvar BaseFoldMode = require(\"./cstyle\").FoldMode;\n\nvar FoldMode = exports.FoldMode = function() {};\n\noop.inherits(FoldMode, BaseFoldMode);\n\n(function() {\n    /** \n     * Inheriting cstyle folding because it handles the region comment folding \n     * and special block comment folding appropriately.\n     * \n     * Cstyle's getCommentRegionBlock() contains the sql comment characters '--' for end region block.\n     */\n    \n    this.foldingStartMarker = /(\\bCASE\\b|\\bBEGIN\\b)|^\\s*(\\/\\*)/i;\n    // this.foldingStopMarker = /(\\bEND\\b)|^[\\s\\*]*(\\*\\/)/i;\n    this.startRegionRe = /^\\s*(\\/\\*|--)#?region\\b/;\n    \n    this.getFoldWidgetRange = function(session, foldStyle, row, forceMultiline) {\n        var line = session.getLine(row);\n    \n        if (this.startRegionRe.test(line)) return this.getCommentRegionBlock(session, line, row);\n    \n        var match = line.match(this.foldingStartMarker);\n        if (match) {\n            var i = match.index;\n            if (match[1]) return this.getBeginEndBlock(session, row, i, match[1]);\n    \n            var range = session.getCommentFoldRange(row, i + match[0].length, 1);\n            if (range && !range.isMultiLine()) {\n                if (forceMultiline) {\n                    range = this.getSectionRange(session, row);\n                }\n                else if (foldStyle != \"all\") range = null;\n            }\n    \n            return range;\n        }\n    \n        if (foldStyle === \"markbegin\") return;\n        //TODO: add support for end folding markers\n        return;\n    };\n    \n    /**\n     * @returns {range} folding block for sequence that starts with 'CASE' or 'BEGIN' and ends with 'END'\n     * @param {string} matchSequence - the sequence of charaters that started the fold widget, which should remain visible when the fold widget is folded\n     */\n    this.getBeginEndBlock = function(session, row, column, matchSequence) {\n        var start = {\n            row: row,\n            column: column + matchSequence.length\n        };\n        var maxRow = session.getLength();\n        var line;\n    \n        var depth = 1;\n        var re = /(\\bCASE\\b|\\bBEGIN\\b)|(\\bEND\\b)/i;\n        while (++row < maxRow) {\n            line = session.getLine(row);\n            var m = re.exec(line);\n            if (!m) continue;\n            if (m[1]) depth++;\n            else depth--;\n    \n            if (!depth) break;\n        }\n        var endRow = row;\n        if (endRow > start.row) {\n            return new Range(start.row, start.column, endRow, line.length);\n        }\n    };\n\n}).call(FoldMode.prototype);\n\n});\n"]}