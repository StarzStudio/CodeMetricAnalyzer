{"version":3,"sources":["static_highlight.js"],"names":[],"mappings":"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","file":"static_highlight-compiled.js","sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\ndefine(function(require, exports, module) {\n\"use strict\";\n\nvar EditSession = require(\"../edit_session\").EditSession;\nvar TextLayer = require(\"../layer/text\").Text;\nvar baseStyles = require(\"../requirejs/text!./static.css\");\nvar config = require(\"../config\");\nvar dom = require(\"../lib/dom\");\n\nvar SimpleTextLayer = function() {\n    this.config = {};\n};\nSimpleTextLayer.prototype = TextLayer.prototype;\n\nvar highlight = function(el, opts, callback) {\n    var m = el.className.match(/lang-(\\w+)/);\n    var mode = opts.mode || m && (\"ace/mode/\" + m[1]);\n    if (!mode)\n        return false;\n    var theme = opts.theme || \"ace/theme/textmate\";\n    \n    var data = \"\";\n    var nodes = [];\n\n    if (el.firstElementChild) {\n        var textLen = 0;\n        for (var i = 0; i < el.childNodes.length; i++) {\n            var ch = el.childNodes[i];\n            if (ch.nodeType == 3) {\n                textLen += ch.data.length;\n                data += ch.data;\n            } else {\n                nodes.push(textLen, ch);\n            }\n        }\n    } else {\n        data = dom.getInnerText(el);\n        if (opts.trim)\n            data = data.trim();\n    }\n    \n    highlight.render(data, mode, theme, opts.firstLineNumber, !opts.showGutter, function (highlighted) {\n        dom.importCssString(highlighted.css, \"ace_highlight\");\n        el.innerHTML = highlighted.html;\n        var container = el.firstChild.firstChild;\n        for (var i = 0; i < nodes.length; i += 2) {\n            var pos = highlighted.session.doc.indexToPosition(nodes[i]);\n            var node = nodes[i + 1];\n            var lineEl = container.children[pos.row];\n            lineEl && lineEl.appendChild(node);\n        }\n        callback && callback();\n    });\n};\n\n/**\n * Transforms a given input code snippet into HTML using the given mode\n *\n * @param {string} input Code snippet\n * @param {string|mode} mode String specifying the mode to load such as\n *  `ace/mode/javascript` or, a mode loaded from `/ace/mode`\n *  (use 'ServerSideHiglighter.getMode').\n * @param {string|theme} theme String specifying the theme to load such as\n *  `ace/theme/twilight` or, a theme loaded from `/ace/theme`.\n * @param {number} lineStart A number indicating the first line number. Defaults\n *  to 1.\n * @param {boolean} disableGutter Specifies whether or not to disable the gutter.\n *  `true` disables the gutter, `false` enables the gutter. Defaults to `false`.\n * @param {function} callback When specifying the mode or theme as a string,\n *  this method has no return value and you must specify a callback function. The\n *  callback will receive the rendered object containing the properties `html`\n *  and `css`.\n * @returns {object} An object containing the properties `html` and `css`.\n */\nhighlight.render = function(input, mode, theme, lineStart, disableGutter, callback) {\n    var waiting = 1;\n    var modeCache = EditSession.prototype.$modes;\n\n    // if either the theme or the mode were specified as objects\n    // then we need to lazily load them.\n    if (typeof theme == \"string\") {\n        waiting++;\n        config.loadModule(['theme', theme], function(m) {\n            theme = m;\n            --waiting || done();\n        });\n    }\n    // allow setting mode options e.h {path: \"ace/mode/php\", inline:true}\n    var modeOptions;\n    if (mode && typeof mode === \"object\" && !mode.getTokenizer) {\n        modeOptions = mode;\n        mode = modeOptions.path;\n    }\n    if (typeof mode == \"string\") {\n        waiting++;\n        config.loadModule(['mode', mode], function(m) {\n            if (!modeCache[mode] || modeOptions)\n                modeCache[mode] = new m.Mode(modeOptions);\n            mode = modeCache[mode];\n            --waiting || done();\n        });\n    }\n\n    // loads or passes the specified mode module then calls renderer\n    function done() {\n        var result = highlight.renderSync(input, mode, theme, lineStart, disableGutter);\n        return callback ? callback(result) : result;\n    }\n    return --waiting || done();\n};\n\n/**\n * Transforms a given input code snippet into HTML using the given mode\n * @param {string} input Code snippet\n * @param {mode} mode Mode loaded from /ace/mode (use 'ServerSideHiglighter.getMode')\n * @param {string} r Code snippet\n * @returns {object} An object containing: html, css\n */\nhighlight.renderSync = function(input, mode, theme, lineStart, disableGutter) {\n    lineStart = parseInt(lineStart || 1, 10);\n\n    var session = new EditSession(\"\");\n    session.setUseWorker(false);\n    session.setMode(mode);\n\n    var textLayer = new SimpleTextLayer();\n    textLayer.setSession(session);\n\n    session.setValue(input);\n\n    var stringBuilder = [];\n    var length =  session.getLength();\n\n    for(var ix = 0; ix < length; ix++) {\n        stringBuilder.push(\"<div class='ace_line'>\");\n        if (!disableGutter)\n            stringBuilder.push(\"<span class='ace_gutter ace_gutter-cell' unselectable='on'>\" + /*(ix + lineStart) + */ \"</span>\");\n        textLayer.$renderLine(stringBuilder, ix, true, false);\n        stringBuilder.push(\"\\n</div>\");\n    }\n\n    // let's prepare the whole html\n    var html = \"<div class='\" + theme.cssClass + \"'>\" +\n        \"<div class='ace_static_highlight\" + (disableGutter ? \"\" : \" ace_show_gutter\") +\n            \"' style='counter-reset:ace_line \" + (lineStart - 1) + \"'>\" +\n            stringBuilder.join(\"\") +\n        \"</div>\" +\n    \"</div>\";\n\n    textLayer.destroy();\n\n    return {\n        css: baseStyles + theme.cssText,\n        html: html,\n        session: session\n    };\n};\n\nmodule.exports = highlight;\nmodule.exports.highlight =highlight;\n});\n"]}