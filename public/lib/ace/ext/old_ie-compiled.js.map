{"version":3,"sources":["old_ie.js"],"names":[],"mappings":";;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,OAAO,UAAS,OAAT,EAAkB,OAAlB,EAA2B,MAA3B,EAAmC;AAC1C;;AACA,QAAI,kBAAkB,IAAtB;AACA,QAAI,YAAY,QAAQ,kBAAR,CAAhB;AACA,QAAI,kBAAkB,QAAQ,cAAR,CAAtB;;AAEA,aAAS,KAAT,CAAe,GAAf,EAAoB,IAApB,EAA0B,MAA1B,EAAkC,WAAlC,EAA+C;AAC3C,aAAK,UAAU,IAAV,GAAiB,KAAjB,GAAyB,IAAI,IAAJ,EAAU,QAAV,GAAqB,OAArB,CAC1B,MAD0B,EAClB,WADkB,CAA9B;AAGH;;AAED,QAAI,UAAU,IAAV,IAAkB,UAAU,IAAV,GAAiB,EAAnC,IAAyC,OAAO,GAAP,CAAW,QAAX,CAAoB,UAApB,KAAmC,YAAhF,EACI,UAAU,OAAV,GAAoB,IAApB;;AAEJ,QAAI,OAAO,QAAP,IAAmB,WAAnB,IAAkC,CAAC,SAAS,eAAT,CAAyB,aAAhE,EAA+E;AAC3E,kBAAU,OAAV,GAAoB,IAApB;AACA,YAAI,KAAK,SAAL,EAAK,CAAS,EAAT,EAAa,QAAb,EAAuB;AAC5B,gBAAI,SAAS,MAAT,CAAgB,CAAhB,KAAsB,GAA1B,EAA+B;AAC3B,oBAAI,YAAY,SAAS,KAAT,CAAe,CAAf,CAAhB;AACH,aAFD,MAEO;AACH,oBAAI,IAAI,SAAS,KAAT,CAAe,aAAf,CAAR;AACA,oBAAI,OAAO,KAAK,EAAE,CAAF,CAAhB;AACA,oBAAI,UAAU,KAAK,EAAE,CAAF,CAAnB;AACH;AACD,iBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,GAAG,GAAH,CAAO,MAA3B,EAAmC,GAAnC,EAAwC;AACpC,oBAAI,KAAK,GAAG,GAAH,CAAO,CAAP,CAAT;AACA,oBAAI,SAAJ,EAAe;AACX,wBAAI,GAAG,SAAH,CAAa,OAAb,CAAqB,SAArB,KAAmC,CAAC,CAAxC,EACI,OAAO,EAAP;AACP,iBAHD,MAGO,IAAI,IAAJ,EAAU;AACb,wBAAI,GAAG,YAAH,CAAgB,IAAhB,KAAyB,OAA7B,EACI,OAAO,EAAP;AACP;AACJ;AACJ,SAlBD;AAmBA,YAAI,KAAK,QAAQ,aAAR,EAAuB,SAAvB,CAAiC,SAA1C;AACA,cACI,EADJ,EACQ,eADR,EAEI,qCAFJ,EAGI,YAHJ;AAKH;;AAED,QAAI,oBAAoB,OAAO,IAAP,CAAY,EAAZ,EAAgB,CAAhB,MAAuB,SAA/C;AACA,QAAI,iBAAJ,EACI;AACJ,QAAI,QAAQ,gBAAgB,SAAhB,CAA0B,SAAtC;AACA,oBAAgB,cAAhB,GAAiC,gBAAgB,SAAjD;AACA,UAAM,kBAAN,GAA2B,MAAM,aAAjC;;AAEA,UACI,eADJ,EACqB,WADrB,EAEI,oCAFJ,EAGI,UAAS,CAAT,EAAY;AACR,eAAO,IAAI;;;SAAX;AAIH,KARL;AAUA,oBAAgB,SAAhB,CAA0B,SAA1B,GAAsC,KAAtC;AACA,UACI,KADJ,EACW,eADX,EAEI,kDAFJ,EAGI;;;;;;;MAHJ;;AAaA,UACI,QAAQ,cAAR,EAAwB,IAAxB,CAA6B,SADjC,EAC4C,cAD5C,EAEI,WAFJ,EAGI,2BAHJ;;AAMA,cAAU,OAAV,GAAoB,IAApB;AAEC,CAnFD","file":"old_ie-compiled.js","sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\ndefine(function(require, exports, module) {\n\"use strict\";\nvar MAX_TOKEN_COUNT = 1000;\nvar useragent = require(\"../lib/useragent\");\nvar TokenizerModule = require(\"../tokenizer\");\n\nfunction patch(obj, name, regexp, replacement) {\n    eval(\"obj['\" + name + \"']=\" + obj[name].toString().replace(\n        regexp, replacement\n    ));\n}\n\nif (useragent.isIE && useragent.isIE < 10 && window.top.document.compatMode === \"BackCompat\")\n    useragent.isOldIE = true;\n\nif (typeof document != \"undefined\" && !document.documentElement.querySelector) {    \n    useragent.isOldIE = true;\n    var qs = function(el, selector) {\n        if (selector.charAt(0) == \".\") {\n            var classNeme = selector.slice(1);\n        } else {\n            var m = selector.match(/(\\w+)=(\\w+)/);\n            var attr = m && m[1];\n            var attrVal = m && m[2];\n        }\n        for (var i = 0; i < el.all.length; i++) {\n            var ch = el.all[i];\n            if (classNeme) {\n                if (ch.className.indexOf(classNeme) != -1)\n                    return ch;\n            } else if (attr) {\n                if (ch.getAttribute(attr) == attrVal)\n                    return ch;\n            }\n        }\n    };\n    var sb = require(\"./searchbox\").SearchBox.prototype;\n    patch(\n        sb, \"$initElements\",\n        /([^\\s=]*).querySelector\\((\".*?\")\\)/g, \n        \"qs($1, $2)\"\n    );\n}\n    \nvar compliantExecNpcg = /()??/.exec(\"\")[1] === undefined;\nif (compliantExecNpcg)\n    return;\nvar proto = TokenizerModule.Tokenizer.prototype;\nTokenizerModule.Tokenizer_orig = TokenizerModule.Tokenizer;\nproto.getLineTokens_orig = proto.getLineTokens;\n\npatch(\n    TokenizerModule, \"Tokenizer\",\n    \"ruleRegExps.push(adjustedregex);\\n\", \n    function(m) {\n        return m + '\\\n        if (state[i].next && RegExp(adjustedregex).test(\"\"))\\n\\\n            rule._qre = RegExp(adjustedregex, \"g\");\\n\\\n        ';\n    }\n);\nTokenizerModule.Tokenizer.prototype = proto;\npatch(\n    proto, \"getLineTokens\",\n    /if \\(match\\[i \\+ 1\\] === undefined\\)\\s*continue;/, \n    \"if (!match[i + 1]) {\\n\\\n        if (value)continue;\\n\\\n        var qre = state[mapping[i]]._qre;\\n\\\n        if (!qre) continue;\\n\\\n        qre.lastIndex = lastIndex;\\n\\\n        if (!qre.exec(line) || qre.lastIndex != lastIndex)\\n\\\n            continue;\\n\\\n    }\"\n);\n\npatch(\n    require(\"../mode/text\").Mode.prototype, \"getTokenizer\",\n    /Tokenizer/,\n    \"TokenizerModule.Tokenizer\"\n);\n\nuseragent.isOldIE = true;\n\n});\n"]}