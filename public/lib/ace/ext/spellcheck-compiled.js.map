{"version":3,"sources":["spellcheck.js"],"names":[],"mappings":"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","file":"spellcheck-compiled.js","sourcesContent":["define(function(require, exports, module) {\n\"use strict\";\nvar event = require(\"../lib/event\");\n\nexports.contextMenuHandler = function(e){\n    var host = e.target;\n    var text = host.textInput.getElement();\n    if (!host.selection.isEmpty())\n        return;\n    var c = host.getCursorPosition();\n    var r = host.session.getWordRange(c.row, c.column);\n    var w = host.session.getTextRange(r);\n\n    host.session.tokenRe.lastIndex = 0;\n    if (!host.session.tokenRe.test(w))\n        return;\n    var PLACEHOLDER = \"\\x01\\x01\";\n    var value = w + \" \" + PLACEHOLDER;\n    text.value = value;\n    text.setSelectionRange(w.length, w.length + 1);\n    text.setSelectionRange(0, 0);\n    text.setSelectionRange(0, w.length);\n\n    var afterKeydown = false;\n    event.addListener(text, \"keydown\", function onKeydown() {\n        event.removeListener(text, \"keydown\", onKeydown);\n        afterKeydown = true;\n    });\n\n    host.textInput.setInputHandler(function(newVal) {\n        console.log(newVal , value, text.selectionStart, text.selectionEnd)\n        if (newVal == value)\n            return '';\n        if (newVal.lastIndexOf(value, 0) === 0)\n            return newVal.slice(value.length);\n        if (newVal.substr(text.selectionEnd) == value)\n            return newVal.slice(0, -value.length);\n        if (newVal.slice(-2) == PLACEHOLDER) {\n            var val = newVal.slice(0, -2);\n            if (val.slice(-1) == \" \") {\n                if (afterKeydown)\n                    return val.substring(0, text.selectionEnd);\n                val = val.slice(0, -1);\n                host.session.replace(r, val);\n                return \"\";\n            }\n        }\n\n        return newVal;\n    });\n};\n// todo support highlighting with typo.js\nvar Editor = require(\"../editor\").Editor;\nrequire(\"../config\").defineOptions(Editor.prototype, \"editor\", {\n    spellcheck: {\n        set: function(val) {\n            var text = this.textInput.getElement();\n            text.spellcheck = !!val;\n            if (!val)\n                this.removeListener(\"nativecontextmenu\", exports.contextMenuHandler);\n            else\n                this.on(\"nativecontextmenu\", exports.contextMenuHandler);\n        },\n        value: true\n    }\n});\n\n});\n\n"]}