{"version":3,"sources":["event_emitter.js"],"names":[],"mappings":"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","file":"event_emitter-compiled.js","sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\ndefine(function(require, exports, module) {\n\"use strict\";\n\nvar EventEmitter = {};\nvar stopPropagation = function() { this.propagationStopped = true; };\nvar preventDefault = function() { this.defaultPrevented = true; };\n\nEventEmitter._emit =\nEventEmitter._dispatchEvent = function(eventName, e) {\n    this._eventRegistry || (this._eventRegistry = {});\n    this._defaultHandlers || (this._defaultHandlers = {});\n\n    var listeners = this._eventRegistry[eventName] || [];\n    var defaultHandler = this._defaultHandlers[eventName];\n    if (!listeners.length && !defaultHandler)\n        return;\n\n    if (typeof e != \"object\" || !e)\n        e = {};\n\n    if (!e.type)\n        e.type = eventName;\n    if (!e.stopPropagation)\n        e.stopPropagation = stopPropagation;\n    if (!e.preventDefault)\n        e.preventDefault = preventDefault;\n\n    listeners = listeners.slice();\n    for (var i=0; i<listeners.length; i++) {\n        listeners[i](e, this);\n        if (e.propagationStopped)\n            break;\n    }\n    \n    if (defaultHandler && !e.defaultPrevented)\n        return defaultHandler(e, this);\n};\n\n\nEventEmitter._signal = function(eventName, e) {\n    var listeners = (this._eventRegistry || {})[eventName];\n    if (!listeners)\n        return;\n    listeners = listeners.slice();\n    for (var i=0; i<listeners.length; i++)\n        listeners[i](e, this);\n};\n\nEventEmitter.once = function(eventName, callback) {\n    var _self = this;\n    callback && this.addEventListener(eventName, function newCallback() {\n        _self.removeEventListener(eventName, newCallback);\n        callback.apply(null, arguments);\n    });\n};\n\n\nEventEmitter.setDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers\n    if (!handlers)\n        handlers = this._defaultHandlers = {_disabled_: {}};\n    \n    if (handlers[eventName]) {\n        var old = handlers[eventName];\n        var disabled = handlers._disabled_[eventName];\n        if (!disabled)\n            handlers._disabled_[eventName] = disabled = [];\n        disabled.push(old);\n        var i = disabled.indexOf(callback);\n        if (i != -1) \n            disabled.splice(i, 1);\n    }\n    handlers[eventName] = callback;\n};\nEventEmitter.removeDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers\n    if (!handlers)\n        return;\n    var disabled = handlers._disabled_[eventName];\n    \n    if (handlers[eventName] == callback) {\n        var old = handlers[eventName];\n        if (disabled)\n            this.setDefaultHandler(eventName, disabled.pop());\n    } else if (disabled) {\n        var i = disabled.indexOf(callback);\n        if (i != -1)\n            disabled.splice(i, 1);\n    }\n};\n\nEventEmitter.on =\nEventEmitter.addEventListener = function(eventName, callback, capturing) {\n    this._eventRegistry = this._eventRegistry || {};\n\n    var listeners = this._eventRegistry[eventName];\n    if (!listeners)\n        listeners = this._eventRegistry[eventName] = [];\n\n    if (listeners.indexOf(callback) == -1)\n        listeners[capturing ? \"unshift\" : \"push\"](callback);\n    return callback;\n};\n\nEventEmitter.off =\nEventEmitter.removeListener =\nEventEmitter.removeEventListener = function(eventName, callback) {\n    this._eventRegistry = this._eventRegistry || {};\n\n    var listeners = this._eventRegistry[eventName];\n    if (!listeners)\n        return;\n\n    var index = listeners.indexOf(callback);\n    if (index !== -1)\n        listeners.splice(index, 1);\n};\n\nEventEmitter.removeAllListeners = function(eventName) {\n    if (this._eventRegistry) this._eventRegistry[eventName] = [];\n};\n\nexports.EventEmitter = EventEmitter;\n\n});\n"]}