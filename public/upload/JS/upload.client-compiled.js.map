{"version":3,"sources":["upload.client.js"],"names":[],"mappings":"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","file":"upload.client-compiled.js","sourcesContent":["\"use strict\";\n\nvar formData = new FormData();\n\n\nvar uploadFiles = function () {\n\n    var projectName = document.querySelector('input[name=\"projectName\"]').value;\n    console.log(projectName);\n    if (projectName === \"\") {\n        alert(\"Please specify your project name\");\n        return;\n    }\n    formData.append('projectName', projectName);\n    var request = new XMLHttpRequest();\n    request.onload = function() {\n\n        //alert(\"upload seccuess!\");\n    }\n\n\n    request.onreadystatechange = function () { // state change, callback\n        if (request.readyState === 4) { // state: done\n            if (request.status === 200) {\n                if(confirm('go to project page？')) {\n                    location.href='#!/projects';\n                }\n\n                // success, get the return text\n                return success(request.responseText);\n            } else {\n                // 失败，根据响应码判断失败原因:\n                return fail(request.status);\n            }\n        } else {\n            console.log(\"http request is still ongoing\");\n    }\n    }\n\n    // make a request\n    request.open(\"POST\", \"\", true);\n    request.send(formData);\n};\n\nfunction success(text) {\n   console.log(text);\n}\n\nfunction fail(code) {\n    console.log(code);\n}\n\n\nfunction fileFilter(filename){\n\n    if (filename.endsWith('.h') || +\n            filename.endsWith('.cc') || +\n            filename.endsWith('.cpp') || +\n            filename.endsWith('.C') || +\n            filename.endsWith('.c') ) {\n\n        return true;\n    } else {\n        alert(' File: ${filename} is not accepted.\\n ' +\n            'Can only upload files with ex:\\n *.h\\n *.cc\\n *.cpp\\n *.C\\n *.c\\n');\n        return false;\n    }\n}\n\n$( \"button[id=submitButton]\" ).click(function() {\n    uploadFiles();\n});\n\n$('input[id=file_input]').change(function() {\n    // $('#photoCover').val($(this).val());\n    // $('#photoCover').val(\"Now, Please click submit button\");\n    appendFilesToFormData();\n\n});\n\n\nconst appendFilesToFormData = function() {\n    var files = document.querySelector(\"#file_input\").files;\n    var fileNameTextarea = document.getElementById(\"fileNameTextarea\");\n    for (let f of files) {\n        if (fileFilter(f.name)){\n\n            // elimate duplicated files\n            if (!formData.has(f.name)) {\n                formData.append(f.name, f);\n                fileNameTextarea.value += f.name;\n                fileNameTextarea.value += '\\n';\n            }\n\n            ResizeTextarea();\n        } else {\n            // if one of files doesn't meet file suffix, then just break the loop and let alert show just once.\n            break;\n        }\n    }\n\n    // for (let key of formData.keys()) {\n    //     console.log(key);\n    // }\n}\n\n\n\n// $(document).ready(function() {\n//\n//\n// });\n\n\nfunction ResizeTextarea(){\n    let minHeight = 100;\n    let maxHeight = 200;\n    let t = document.getElementById('fileNameTextarea');\n    let h = t.scrollHeight;\n    h = h > minHeight ? h : minHeight;\n    h = h > maxHeight ? maxHeight : h ;\n    t.style.height = h + \"px\";\n}\n\n// $(\"textarea[id=fileNameTextarea]\").scroll(function(){ $(this).css(\"height\",$(this)[0].scrollHeight); });"]}