{"version":3,"sources":["users.server.controller.js"],"names":[],"mappings":";;AAAA,IAAI,OAAO,QAAQ,UAAR,EAAoB,KAApB,CAA0B,MAA1B,CAAX;;AAGA,QAAQ,MAAR,GAAiB,UAAS,GAAT,EAAc,GAAd,EAAmB,IAAnB,EAAyB;AACtC,QAAI,OAAO,IAAI,IAAJ,CAAS,IAAI,IAAb,CAAX;AACA,SAAK,IAAL,CAAU,UAAS,GAAT,EAAc;AACpB,YAAI,GAAJ,EAAS;AACL,mBAAO,KAAK,GAAL,CAAP;AACH,SAFD,MAEO;AACH,gBAAI,IAAJ,CAAS,IAAT;AACH;AACJ,KAND;AAOH,CATD;;AAWA,QAAQ,SAAR,GAAoB,UAAS,GAAT,EAAc,GAAd,EAAmB;AACnC,QAAI,WAAW,IAAI,EAAnB;AACA,SAAK,OAAL,CAAa,EAAC,QAAO,QAAR,EAAb,EAAgC,UAAS,GAAT,EAAc,IAAd,EAAoB;AAChD,YAAI,GAAJ,EAAS;AACL,oBAAQ,GAAR,CAAY,GAAZ;AACH;;AAED,YAAG,IAAH,EAAS;AACL,oBAAQ,GAAR,CAAY,qBAAZ;AACA,gBAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,IAArB;AACH,SAHD,MAGO;AACH,gBAAI,UAAU,IAAI,IAAJ,EAAd;AACA,oBAAQ,IAAR,GAAe,QAAf;AACA,oBAAQ,IAAR,CAAa,UAAS,GAAT,EAAc;AACvB,oBAAI,GAAJ,EAAS;AACL,4BAAQ,GAAR,CAAY,GAAZ;AACH,iBAFD,MAGK;AACD,4BAAQ,GAAR,CAAY,qBAAZ;AACA,4BAAQ,GAAR,CAAY,OAAZ;AACA,wBAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,OAArB;AACH;AACJ,aATD;AAUH;AACJ,KAtBD;AAyBH,CA3BD;;AA6BA,QAAQ,IAAR,GAAe,UAAS,GAAT,EAAc,GAAd,EAAmB,IAAnB,EAAyB;AACpC,SAAK,IAAL,CAAU,EAAV,EAAc,UAAS,GAAT,EAAc,KAAd,EAAqB;AAC/B,YAAI,GAAJ,EAAS;AACL,mBAAO,KAAK,GAAL,CAAP;AACH,SAFD,MAEO;AACH,gBAAI,IAAJ,CAAS,KAAT;AACH;AACJ,KAND;AAOH,CARD;;AAUA,QAAQ,IAAR,GAAe,UAAS,GAAT,EAAc,GAAd,EAAmB;AAC9B,QAAI,IAAJ,CAAS,IAAI,IAAb;AACH,CAFD;;AAKA,QAAQ,QAAR,GAAmB,UAAS,GAAT,EAAc,GAAd,EAAmB,IAAnB,EAAyB,EAAzB,EAA6B;AAC5C,SAAK,OAAL,CAAa;AACT,aAAK;AADI,KAAb,EAEG,UAAS,GAAT,EAAc,IAAd,EAAoB;AACnB,YAAI,GAAJ,EAAS;AACL,mBAAO,KAAK,GAAL,CAAP;AACH,SAFD,MAEO;AACH,gBAAI,IAAJ,GAAW,IAAX;AACA;AACH;AACJ,KATD;AAUH,CAXD;;AAaA,QAAQ,MAAR,GAAiB,UAAS,GAAT,EAAc,GAAd,EAAmB,IAAnB,EAAyB;AACtC,SAAK,iBAAL,CAAuB,IAAI,IAAJ,CAAS,EAAhC,EAAoC,IAAI,IAAxC,EAA8C,UAAS,GAAT,EAAc,IAAd,EAAoB;AAC9D,YAAI,GAAJ,EAAS;AACL,mBAAO,KAAK,GAAL,CAAP;AACH,SAFD,MAEO;AACH,gBAAI,IAAJ,CAAS,IAAT;AACH;AACJ,KAND;AAOH,CARD;;AAUA,QAAQ,MAAR,GAAiB,UAAS,GAAT,EAAc,GAAd,EAAmB,IAAnB,EAAyB;AACtC,QAAI,IAAJ,CAAS,MAAT,CAAgB,UAAS,GAAT,EAAc;AAC1B,YAAI,GAAJ,EAAS;AACL,mBAAO,KAAK,GAAL,CAAP;AACH,SAFD,MAEO;AACH,gBAAI,IAAJ,CAAS,IAAI,IAAb;AACH;AACJ,KAND;AAOH,CARD","file":"users.server.controller-compiled.js","sourcesContent":["var User = require('mongoose').model('User');\n\n\nexports.create = function(req, res, next) {\n    var user = new User(req.body);\n    user.save(function(err) {\n        if (err) {\n            return next(err);\n        } else {\n            res.json(user);\n        }\n    });\n};\n\nexports.alongSave = function(req, res) {\n    let userName = req.ip;\n    User.findOne({'name':userName}, function(err, user) {\n        if (err) {\n            console.log(err);\n        }\n\n        if(user) {\n            console.log('this is an old user');\n            res.status(200).json(user);\n        } else {\n            var newuser = new User();\n            newuser.name = userName;\n            newuser.save(function(err) {\n                if (err) {\n                    console.log(err);\n                }\n                else {\n                    console.log('this is an new user');\n                    console.log(newuser);\n                    res.status(200).json(newuser);\n                }\n            });\n        }\n    });\n\n\n};\n\nexports.list = function(req, res, next) {\n    User.find({}, function(err, users) {\n        if (err) {\n            return next(err);\n        } else {\n            res.json(users);\n        }\n    });\n};\n\nexports.read = function(req, res) {\n    res.json(req.user);\n};\n\n\nexports.userByID = function(req, res, next, id) {\n    User.findOne({\n        _id: id\n    }, function(err, user) {\n        if (err) {\n            return next(err);\n        } else {\n            req.user = user;\n            next();\n        }\n    });\n};\n\nexports.update = function(req, res, next) {\n    User.findByIdAndUpdate(req.user.id, req.body, function(err, user) {\n        if (err) {\n            return next(err);\n        } else {\n            res.json(user);\n        }\n    });\n};\n\nexports.delete = function(req, res, next) {\n    req.user.remove(function(err) {\n        if (err) {\n            return next(err);\n        } else {\n            res.json(req.user);\n        }\n    })\n};"]}